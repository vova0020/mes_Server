
# API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ú–æ–¥—É–ª—å –º–∞—Ä—à—Ä—É—Ç–æ–≤
> **–ë–∞–∑–æ–≤—ã–π URL:** `http://localhost:5000` (–∏–ª–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä)

## –ë–∞–∑–æ–≤—ã–π URL
```
/settings/routes
```

## Socket.IO –ö–æ–º–Ω–∞—Ç–∞
```
routes
```

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤](#crud-–æ–ø–µ—Ä–∞—Ü–∏–∏-–¥–ª—è-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
2. [CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —ç—Ç–∞–ø–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∞](#crud-–æ–ø–µ—Ä–∞—Ü–∏–∏-–¥–ª—è-—ç—Ç–∞–ø–æ–≤-–º–∞—Ä—à—Ä—É—Ç–∞)
3. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —ç—Ç–∞–ø–æ–≤](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é-—ç—Ç–∞–ø–æ–≤)
4. [–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã](#–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ-–º–µ—Ç–æ–¥—ã)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö)
6. [Socket.IO –°–æ–±—ã—Ç–∏—è](#socketio-—Å–æ–±—ã—Ç–∏—è)

---

## CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
```http
GET /settings/routes
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "routeId": 1,
    "routeName": "–ú–∞—Ä—à—Ä—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –¥–µ—Ç–∞–ª–∏ A",
    "routeStages": [
      {
        "routeStageId": 1,
        "routeId": 1,
        "stageId": 1,
        "substageId": 2,
        "sequenceNumber": 1,
        "stage": {
          "stageId": 1,
          "stageName": "–û–±—Ä–∞–±–æ—Ç–∫–∞"
        },
        "substage": {
          "substageId": 2,
          "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞"
        }
      }
    ],
    "_count": {
      "parts": 5
    }
  }
]
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø–æ ID
```http
GET /settings/routes/:id
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeId": 1,
  "routeName": "–ú–∞—Ä—à—Ä—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –¥–µ—Ç–∞–ª–∏ A",
  "routeStages": [
    {
      "routeStageId": 1,
      "routeId": 1,
      "stageId": 1,
      "substageId": 2,
      "sequenceNumber": 1,
      "stage": {
        "stageId": 1,
        "stageName": "–û–±—Ä–∞–±–æ—Ç–∫–∞"
      },
      "substage": {
        "substageId": 2,
        "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞"
      }
    }
  ],
  "parts": [
    {
      "partId": 1,
      "partName": "–î–µ—Ç–∞–ª—å A1",
      "partCode": "DET-A1"
    }
  ]
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

### 3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç
```http
POST /settings/routes
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "routeName": "–ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç",
  "stages": [
    {
      "stageId": 1,
      "substageId": 2,
      "sequenceNumber": 1
    }
  ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeId": 2,
  "routeName": "–ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç",
  "routeStages": [...]
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 4. –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
```http
PUT /settings/routes/:id
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "routeName": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeId": 1,
  "routeName": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞",
  "routeStages": [...]
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

### 5. –£–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
```http
DELETE /settings/routes/:id
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–ú–∞—Ä—à—Ä—É—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω"
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ú–∞—Ä—à—Ä—É—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω

---

## CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —ç—Ç–∞–ø–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∞

### 1. –ü–æ–ª—É—á–∏—Ç—å —ç—Ç–∞–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞
```http
GET /settings/routes/:id/stages
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "routeStageId": 1,
    "routeId": 1,
    "stageId": 1,
    "substageId": 2,
    "sequenceNumber": 1,
    "stage": {
      "stageId": 1,
      "stageName": "–û–±—Ä–∞–±–æ—Ç–∫–∞"
    },
    "substage": {
      "substageId": 2,
      "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞"
    }
  }
]
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2. –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–ø –∫ –º–∞—Ä—à—Ä—É—Ç—É
```http
POST /settings/routes/:id/stages
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "stageId": 1,
  "substageId": 2,
  "sequenceNumber": 3
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeStageId": 3,
  "routeId": 1,
  "stageId": 1,
  "substageId": 2,
  "sequenceNumber": 3,
  "stage": {
    "stageId": 1,
    "stageName": "–û–±—Ä–∞–±–æ—Ç–∫–∞"
  },
  "substage": {
    "substageId": 2,
    "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞"
  }
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —ç—Ç–∞–ø –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 3. –û–±–Ω–æ–≤–∏—Ç—å —ç—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞
```http
PUT /settings/routes/stages/:stageId
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `stageId` (number) - ID —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "stageId": 2,
  "substageId": 3,
  "sequenceNumber": 2
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeStageId": 1,
  "routeId": 1,
  "stageId": 2,
  "substageId": 3,
  "sequenceNumber": 2,
  "stage": {
    "stageId": 2,
    "stageName": "–°–±–æ—Ä–∫–∞"
  },
  "substage": {
    "substageId": 3,
    "substageName": "–§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞"
  }
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –≠—Ç–∞–ø –Ω–µ –Ω–∞–π–¥–µ–Ω

### 4. –£–¥–∞–ª–∏—Ç—å —ç—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞
```http
DELETE /settings/routes/stages/:stageId
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `stageId` (number) - ID —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–≠—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω"
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –≠—Ç–∞–ø –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –≠—Ç–∞–ø –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —ç—Ç–∞–ø–æ–≤

### 1. –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤ –≤ –º–∞—Ä—à—Ä—É—Ç–µ
```http
PUT /settings/routes/:id/stages/reorder
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "stageIds": [3, 1, 2]
}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "routeStageId": 3,
    "sequenceNumber": 1,
    "stage": {...}
  },
  {
    "routeStageId": 1,
    "sequenceNumber": 2,
    "stage": {...}
  },
  {
    "routeStageId": 2,
    "sequenceNumber": 3,
    "stage": {...}
  }
]
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —ç—Ç–∞–ø –Ω–∞ –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é
```http
PUT /settings/routes/stages/:stageId/move
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `stageId` (number) - ID —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "newSequenceNumber": 2
}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "routeStageId": 1,
    "sequenceNumber": 1,
    "stage": {...}
  },
  {
    "routeStageId": 3,
    "sequenceNumber": 2,
    "stage": {...}
  }
]
```

**–û—à–∏–±–∫–∏:**
- `404` - –≠—Ç–∞–ø –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### 1. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç—Ç–∞–ø—ã —É—Ä–æ–≤–Ω—è 1
```http
GET /settings/routes/available-stages/level1
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "stageId": 1,
    "stageName": "–û–±—Ä–∞–±–æ—Ç–∫–∞",
    "productionStagesLevel2": [
      {
        "substageId": 1,
        "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
        "stageId": 1
      }
    ]
  }
]
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç—Ç–∞–ø—ã —É—Ä–æ–≤–Ω—è 2
```http
GET /settings/routes/available-stages/level2/:stageId
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `stageId` (number) - ID —ç—Ç–∞–ø–∞ —É—Ä–æ–≤–Ω—è 1

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "substageId": 1,
    "substageName": "–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
    "stageId": 1
  },
  {
    "substageId": 2,
    "substageName": "–§—Ä–µ–∑–µ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
    "stageId": 1
  }
]
```

### 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
```http
POST /settings/routes/:id/copy
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (number) - ID –º–∞—Ä—à—Ä—É—Ç–∞ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "newRouteName": "–ö–æ–ø–∏—è –º–∞—Ä—à—Ä—É—Ç–∞"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "routeId": 4,
  "routeName": "–ö–æ–ø–∏—è –º–∞—Ä—à—Ä—É—Ç–∞",
  "routeStages": [...]
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### CreateRouteDto
```typescript
{
  routeName: string;              // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
  stages?: CreateRouteStageDto[]; // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ —ç—Ç–∞–ø–æ–≤
}
```

### UpdateRouteDto
```typescript
{
  routeName: string; // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
}
```

### CreateRouteStageDto
```typescript
{
  stageId: number;          // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ - ID —ç—Ç–∞–ø–∞ —É—Ä–æ–≤–Ω—è 1
  substageId?: number;      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ - ID —ç—Ç–∞–ø–∞ —É—Ä–æ–≤–Ω—è 2
  sequenceNumber?: number;  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ - –Ω–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
}
```

### UpdateRouteStageDto
```typescript
{
  stageId?: number;         // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ - ID —ç—Ç–∞–ø–∞ —É—Ä–æ–≤–Ω—è 1
  substageId?: number;      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ - ID —ç—Ç–∞–ø–∞ —É—Ä–æ–≤–Ω—è 2
  sequenceNumber?: number;  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ - –Ω–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
}
```

### ReorderRouteStagesDto
```typescript
{
  stageIds: number[]; // –ú–∞—Å—Å–∏–≤ ID —ç—Ç–∞–ø–æ–≤ –≤ –Ω–æ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ
}
```

### MoveRouteStageDto
```typescript
{
  newSequenceNumber: number; // –ù–æ–≤—ã–π –Ω–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
}
```

### CopyRouteDto
```typescript
{
  newRouteName: string; // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–ø–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
}
```

---

## Socket.IO –°–æ–±—ã—Ç–∏—è

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
```javascript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
socket.emit('join-room', 'routes');
```

### –°–æ–±—ã—Ç–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### routeCreated
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeCreated', (data) => {
  console.log('–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:', data);
  // data: { route: Route, timestamp: string }
});
```

#### routeUpdated
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeUpdated', (data) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω:', data);
  // data: { route: Route, timestamp: string }
});
```

#### routeDeleted
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeDeleted', (data) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç —É–¥–∞–ª–µ–Ω:', data);
  // data: { routeId: number, routeName: string, timestamp: string }
});
```

#### routeCopied
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeCopied', (data) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω:', data);
  // data: { originalRoute: Route, copiedRoute: Route, timestamp: string }
});
```

### –°–æ–±—ã—Ç–∏—è —ç—Ç–∞–ø–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∞

#### routeStageCreated
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeStageCreated', (data) => {
  console.log('–°–æ–∑–¥–∞–Ω —ç—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞:', data);
  // data: { routeId: number, routeName: string, routeStage: RouteStage, timestamp: string }
});
```

#### routeStageUpdated
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeStageUpdated', (data) => {
  console.log('–≠—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω:', data);
  // data: { routeId: number, routeName: string, routeStage: RouteStage, timestamp: string }
});
```

#### routeStageDeleted
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —ç—Ç–∞–ø–∞ –º–∞—Ä—à—Ä—É—Ç–∞
```javascript
socket.on('routeStageDeleted', (data) => {
  console.log('–≠—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞ —É–¥–∞–ª–µ–Ω:', data);
  // data: { 
  //   routeStageId: number, 
  //   routeId: number, 
  //   routeName: string, 
  //   stageName: string, 
  //   substageName?: string, 
  //   timestamp: string 
  // }
});
```

#### routeStagesReordered
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ—Ä—è–¥–∫–∞ —ç—Ç–∞–ø–æ–≤
```javascript
socket.on('routeStagesReordered', (data) => {
  console.log('–ü–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω:', data);
  // data: { routeId: number, routeName: string, stages: RouteStage[], timestamp: string }
});
```

#### routeStageMoved
–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —ç—Ç–∞–ø–∞
```javascript
socket.on('routeStageMoved', (data) => {
  console.log('–≠—Ç–∞–ø –ø–µ—Ä–µ–º–µ—â–µ–Ω:', data);
  // data: { 
  //   routeId: number, 
  //   routeName: string, 
  //   routeStageId: number, 
  //   oldSequenceNumber: number, 
  //   newSequenceNumber: number, 
  //   stages: RouteStage[], 
  //   timestamp: string 
  // }
});
```

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 201 | –†–µ—Å—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω |
| 400 | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ |
| 404 | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 500 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ ID –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏
2. –ü–æ–ª–µ `sequenceNumber` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
3. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö
4. Socket.IO —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∫ –∫–æ–º–Ω–∞—Ç–µ 'routes'
5. –í—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO string
